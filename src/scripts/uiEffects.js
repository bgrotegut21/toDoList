import { getUpdatedElements } from "./pageLayout.js";
import { getElementByBoardIndex, findObjectByName} from "./utilities.js";


const unshadeButtons = ()=> {
    let elements = getUpdatedElements();
    let buttons = elements.button;
    buttons.forEach(element => {
        let elementChildren = Array.from(element.children);
        elementChildren.forEach(childElement => {
            childElement.style.background = "none";
        })
    })
}

const removeBoardOverlay = () => {
    let elements = getUpdatedElements();
    elements.boardOverlay.forEach(element => {
        element.style.display = "none";
    })
}

const addBoardOverlay = (index) => {
    let boardOverlay = getElementByBoardIndex(index,"boardOverlay");
    boardOverlay.style.display = "block";

}

const setTaskDate = (date) => {
    let element = getUpdatedElements();
    let datePicker = element.datePicker[0];
    datePicker.valueAsDate = date;
}

const changeListEditorPriority  = (currentPriority,array) => {
    let listEditor = findObjectByName("listEditor",array);
    listEditor.priority = currentPriority;
    

}

const shadeButtonColor = (event,array) => {
    unshadeButtons();
    let paragraph;
    if (event.target.getAttribute("class") == "button high" ||
        event.target.getAttribute("class") == "button medium" ||
        event.target.getAttribute("class") == "button low"
    ) paragraph = Array.from(event.target.children)[0];

    if (event.target.getAttribute("class") == "highText") {
        event.target.style.background = "red";
        changeListEditorPriority("High",array)

    } else if (event.target.getAttribute("class") == "mediumText"){
        event.target.style.background = "#ff9800";
        changeListEditorPriority("Medium", array)

    } else if (event.target.getAttribute("class") == "lowText"){
        event.target.style.background = "green";
        changeListEditorPriority("Low", array)
    } else if (event.target.getAttribute("class") == "button high"){
        paragraph.style.background = "red";
        changeListEditorPriority("High", array)

    } else if (event.target.getAttribute("class") == "button medium"){
        paragraph.style.background = "#ff9800";
        changeListEditorPriority("Medium", array)
    } else if (event.target.getAttribute("class") == "button low"){
        paragraph.style.background = "green";
        changeListEditorPriority("Low", array)
    }
}


 

export {removeBoardOverlay, addBoardOverlay, shadeButtonColor, setTaskDate}

